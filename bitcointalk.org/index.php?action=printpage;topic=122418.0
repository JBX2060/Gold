<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
		<link rel="canonical" href="https://bitcointalk.org/index.php?topic=122418.0" />
		<title>Print Page - Bitcoin 0.7.x won't synchronise past block 206457</title>
		<style type="text/css">
			body
			{
				color: black;
				background-color: white;
			}
			body, td, .normaltext
			{
				font-family: Verdana, arial, helvetica, serif;
				font-size: small;
			}
			*, a:link, a:visited, a:hover, a:active
			{
				color: black !important;
			}
			table
			{
				empty-cells: show;
			}
			.code
			{
				font-size: x-small;
				font-family: monospace;
				border: 1px solid black;
				margin: 1px;
				padding: 1px;
			}
			.quote
			{
				font-size: x-small;
				border: 1px solid black;
				margin: 1px;
				padding: 1px;
			}
			.smalltext, .quoteheader, .codeheader
			{
				font-size: x-small;
			}
			.largetext
			{
				font-size: large;
			}
			hr
			{
				height: 1px;
				border: 0;
				color: black;
				background-color: black;
			}
		</style>
	</head>
	<body>
		<h1 class="largetext">Bitcoin Forum</h1>
		<h2 class="normaltext">Bitcoin => Bitcoin Technical Support => Topic started by: Foxpup on November 05, 2012, 07:53:26 AM</h2>

		<table width="90%" cellpadding="0" cellspacing="0" border="0">
			<tr>
				<td>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Bitcoin 0.7.x won't synchronise past block 206457</b><br />
					Post by: <b>Foxpup</b> on <b>November 05, 2012, 07:53:26 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><del>Bitcoin 0.7.0 just crashes with no error message and nothing in debug.log, leading to 22DbRunRecoveryException fun. &gt;:(<br />Bitcoin 0.7.1 does not crash, instead it just gets stuck while spewing a ton of errors to debug.log:</del><br /><div class="codeheader">Code:</div><div class="code">received block 00000000000002b0fa88<br />connection timeout<br />trying connection 109.123.33.243:8333 lastseen=20.2hrs<br />ERROR: SetBestChain() : TxnCommit failed<br />ERROR: SetBestChain() : SetBestChainInner failed<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />getblocks -1 to 00000000000000000000 limit 500<br />received block 000000000000004055b1<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000004e815d6<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />received block 00000000000004086917<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />trying connection 98.197.66.251:8333 lastseen=32.4hrs<br />received block 000000000000021f176d<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />ERROR: FetchInputs() : faa4a7ffaa mempool Tx prev not found 17ffdc0de5<br />stored orphan tx faa4a7ffaa (mapsz 1)<br />received block 00000000000001e2fc4f<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000002168e46<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 000000000000013d86b8<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000004df9d9b<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />received block 00000000000000ca2211<br />trying connection 206.214.221.145:8333 lastseen=19.6hrs<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000003a0e50d<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 000000000000049a671d<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000004d162f0<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />ERROR: FetchInputs() : 469a200091 mempool Tx prev not found f88ad4fe16<br />stored orphan tx 469a200091 (mapsz 2)<br />connection timeout<br />received block 00000000000002e19724<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />trying connection 58.59.138.210:8333 lastseen=12.1hrs<br />ERROR: FetchInputs() : 3062710bb1 mempool Tx prev not found 337837ef71<br />stored orphan tx 3062710bb1 (mapsz 3)<br />connection timeout<br />trying connection 90.213.200.159:8333 lastseen=39.7hrs<br />received block 00000000000000e8cdb2<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 000000000000040cc0d5<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 000000000000001a5ff5<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000002470854<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000004a42633<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000004e9e3f2<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000002559d98<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000003eee1d3<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />ERROR: FetchInputs() : 7578d33c75 mempool Tx prev not found 996dbc5b74<br />stored orphan tx 7578d33c75 (mapsz 4)<br />ERROR: FetchInputs() : 5189182976 mempool Tx prev not found cc94b2a774<br />stored orphan tx 5189182976 (mapsz 5)<br />connection timeout<br />trying connection 83.31.49.235:8333 lastseen=107.1hrs<br />received block 00000000000004c20256<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />received block 00000000000000d0c8b6<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000001914137<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 000000000000015d4742<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />trying connection 50.73.45.241:8333 lastseen=25.7hrs<br />received block 000000000000024c8527<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 000000000000025fd8c7<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />trying connection 74.138.246.128:8333 lastseen=8.5hrs<br />ERROR: FetchInputs() : dc303332d5 mempool Tx prev not found 7578d33c75<br />stored orphan tx dc303332d5 (mapsz 6)<br />connection timeout<br />trying connection 217.9.91.118:8333 lastseen=36.5hrs<br />Added 536 addresses from 67.170.161.21: 729 tried, 12522 new<br />received block 00000000000004ceb4ae<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />trying connection 109.86.14.23:8333 lastseen=6.9hrs<br />received block 00000000000004585e25<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />trying connection 2.230.36.153:8333 lastseen=37.9hrs<br />received block 0000000000000284a36c<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />trying connection 24.178.88.230:8333 lastseen=9.3hrs<br />ERROR: FetchInputs() : 5b67be65e9 mempool Tx prev not found 8e890d7104<br />stored orphan tx 5b67be65e9 (mapsz 7)<br />ERROR: FetchInputs() : b1f58cba76 mempool Tx prev not found b05cfb03f2<br />stored orphan tx b1f58cba76 (mapsz 8)<br />connection timeout<br />trying connection 195.202.218.108:8333 lastseen=23.4hrs<br />connection timeout<br />trying connection 93.81.254.9:8333 lastseen=10.8hrs<br />ERROR: FetchInputs() : 18c5195d6b mempool Tx prev not found 52bfcc2590<br />stored orphan tx 18c5195d6b (mapsz 9)<br />ERROR: FetchInputs() : 354e163bca mempool Tx prev not found 9fdfcc266e<br />stored orphan tx 354e163bca (mapsz 10)<br />received block 00000000000001ed301a<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000004e0b5da<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 0000000000000497e056<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000002b3ba2c<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />Added 570 addresses from 67.170.161.21: 729 tried, 12557 new<br />connection timeout<br />trying connection 81.84.211.237:8333 lastseen=27.0hrs<br />received block 0000000000000188994a<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />trying connection 72.53.3.229:8333 lastseen=45.7hrs<br />ERROR: CAddrman::Write() : open failed<br />Flushed 13286 addresses to peers.dat &nbsp;24ms<br />received block 000000000000047a390d<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />trying connection 190.246.43.47:8333 lastseen=37.0hrs<br />received block 00000000000001df9f9f<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />Added 7 addresses from ::: 729 tried, 12559 new<br />13 addresses found from DNS seeds<br />ThreadDNSAddressSeed exited<br />received block 000000000000018e4a82<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 000000000000026168ea<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000000888968<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000001064014<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000002e26a33<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000000cd9ded<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />connection timeout<br />trying connection 217.147.162.222:8333 lastseen=11.2hrs<br />received block 000000000000012b7d43<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />received block 00000000000002b5e089<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />Added 114 addresses from 95.172.9.82: 729 tried, 12567 new<br />Added 1 addresses from 95.172.9.82: 729 tried, 12567 new<br />connection timeout<br />trying connection 70.162.76.144:8333 lastseen=15.0hrs<br />connected 70.162.76.144:8333<br />send version message: version 60002, blocks=206457, us=xxx.xxx.xxx.xxx:8333, them=70.162.76.144:8333, peer=70.162.76.144:8333<br />received block 000000000000014f4645<br />ProcessBlock: ORPHAN BLOCK, prev=000000000000024c3771<br />ERROR: FetchInputs() : 131ea92385 mempool Tx prev not found 3443ab8753<br />stored orphan tx 131ea92385 (mapsz 11)<br />ERROR: FetchInputs() : c92bec7498 mempool Tx prev not found ed8d2cec6f<br />stored orphan tx c92bec7498 (mapsz 12)<br />ERROR: FetchInputs() : 8b6e65ed5a mempool Tx prev not found dddc000e08<br />stored orphan tx 8b6e65ed5a (mapsz 13)<br />ERROR: FetchInputs() : ce701db2a0 mempool Tx prev not found ecef494aad<br />stored orphan tx ce701db2a0 (mapsz 14)<br />ERROR: FetchInputs() : 03b972ac88 mempool Tx prev not found eaf11c833e<br />stored orphan tx 03b972ac88 (mapsz 15)<br />ERROR: FetchInputs() : a277e3e29b mempool Tx prev not found 55678a46e9<br />stored orphan tx a277e3e29b (mapsz 16)<br />ERROR: FetchInputs() : ef07e48ee5 mempool Tx prev not found 66b40a0ad4<br />stored orphan tx ef07e48ee5 (mapsz 17)<br />ERROR: FetchInputs() : 6adc8799db mempool Tx prev not found 0dbc3a8bd7<br />stored orphan tx 6adc8799db (mapsz 18)<br />ERROR: FetchInputs() : 5ba6b6e6ce mempool Tx prev not found f1469cbbba<br />stored orphan tx 5ba6b6e6ce (mapsz 19)<br />ERROR: FetchInputs() : be09a2d11c mempool Tx prev not found 6adc8799db<br />stored orphan tx be09a2d11c (mapsz 20)<br />ERROR: FetchInputs() : 68e01c7d0b mempool Tx prev not found 3366845f26<br />stored orphan tx 68e01c7d0b (mapsz 21)<br />ERROR: FetchInputs() : 7cb74aad6a mempool Tx prev not found 3fc244e381<br />stored orphan tx 7cb74aad6a (mapsz 22)<br />trying connection 82.58.25.9:8333 lastseen=18.2hrs<br />Added time data, samples 5, offset -265 (-4 minutes)<br />nTimeOffset = -255 &nbsp;(-4 minutes)<br />receive version message: version 60001, blocks=206541, us=xxx.xxx.xxx.xxx:35887, them=70.162.76.144:8333, peer=70.162.76.144:8333<br />received block 000000000000021139f8<br />ERROR: AcceptBlock() : AddToBlockIndex failed<br />ERROR: ProcessBlock() : AcceptBlock FAILED<br />ERROR: FetchInputs() : 605f931912 mempool Tx prev not found dcdeecf4e0<br />stored orphan tx 605f931912 (mapsz 23)<br />connection timeout<br />trying connection 76.85.165.113:8333 lastseen=30.0hrs<br />connect() failed after select(): No route to host<br />Added 530 addresses from 70.162.76.144: 729 tried, 12576 new<br />trying connection 65.185.46.38:8333 lastseen=43.4hrs<br />Added 523 addresses from 70.162.76.144: 729 tried, 12623 new<br />Added 251 addresses from 70.162.76.144: 729 tried, 12639 new<br />connection timeout<br />trying connection 84.110.216.9:8333 lastseen=11.5hrs<br />ERROR: FetchInputs() : d8deba3120 mempool Tx prev not found 5ba6b6e6ce<br />stored orphan tx d8deba3120 (mapsz 24)<br />ERROR: FetchInputs() : a6ca346571 mempool Tx prev not found 021996e8fd<br />stored orphan tx a6ca346571 (mapsz 25)<br />connection timeout<br />trying connection 78.36.70.200:8333 lastseen=14.3hrs</div><del>It seems everything just goes horribly wrong somehow with block 206548. I&#039;ve tried several times (from old backups of the blockchain) with both versions and it&#039;s always the same block. There&#039;s nothing unusual about that block, is there? In any case, is it possible to fix it without downloading the whole blockchain again? (Though I doubt that would help anyway unless my blockchain got corrupted a while ago and it&#039;s only just causing an issue now for some reason.)</del><br /><br />EDIT: The problem seems to have fixed itself. Bitcoin 0.7.0 (I gave up on trying to get 0.7.1 to work) is now fully synchronised after restoring a backup of the blockchain (the same backup which kept crashing on block 206548 earlier). Though I&#039;m still curious what caused the problem in the first place. What do those errors mean?<br /></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Bitcoin 0.7.x won't synchronise past block 206457</b><br />
					Post by: <b>deepceleron</b> on <b>November 07, 2012, 03:47:32 AM</b>
					<hr />
					<div style="margin: 0 5ex;">received block 00000000000002b0fa88 on the top line of your log is a real 206458:<br />http://blockexplorer.com/block/00000000000002b0fa887f1ef355d8b86dd75fc5d5bd93613584383765ab8f4f<br /><br />However, there was an error writing the blkindex.dat file; likely this file was corrupted, there is a disk CRC write error/bad block, or another Bitcoin is concurrently attempting to access it, etc. The error is unanticipated/unhandled by the code. In this case, rebuilding the index, or restoring/redownloading the blockchain is the remedy.<br /><br />Corresponding code: main.cpp line 2051:<br /><br /><div class="codeheader">Code:</div><div class="code"> // Write block to history file<br />&nbsp;&nbsp; &nbsp;unsigned int nBlockSize = ::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION);<br />&nbsp;&nbsp; &nbsp;if (!CheckDiskSpace(::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION)))<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return error(&quot;AcceptBlock() : out of disk space&quot;);<br />&nbsp;&nbsp; &nbsp;CDiskBlockPos blockPos;<br />&nbsp;&nbsp; &nbsp;if (!FindBlockPos(blockPos, nBlockSize+8, nHeight, nTime))<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return error(&quot;AcceptBlock() : FindBlockPos failed&quot;);<br />&nbsp;&nbsp; &nbsp;if (!WriteToDisk(blockPos))<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return error(&quot;AcceptBlock() : WriteToDisk failed&quot;);<br />&nbsp;&nbsp; &nbsp;if (!AddToBlockIndex(blockPos))<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return error(&quot;AcceptBlock() : AddToBlockIndex failed&quot;);</div><br />And the called <i>addtoblockindex()</i> function that failed (line 1815):<br /><div class="codeheader">Code:</div><div class="code">bool CBlock::AddToBlockIndex(const CDiskBlockPos &amp;pos)<br />{<br />&nbsp;&nbsp; &nbsp;// Check for duplicate<br />&nbsp;&nbsp; &nbsp;uint256 hash = GetHash();<br />&nbsp;&nbsp; &nbsp;if (mapBlockIndex.count(hash))<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return error(&quot;AddToBlockIndex() : %s already exists&quot;, hash.ToString().substr(0,20).c_str());<br /><br />&nbsp;&nbsp; &nbsp;// Construct new block index object<br />&nbsp;&nbsp; &nbsp;CBlockIndex* pindexNew = new CBlockIndex(*this);<br />&nbsp;&nbsp; &nbsp;if (!pindexNew)<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return error(&quot;AddToBlockIndex() : new CBlockIndex failed&quot;);<br />&nbsp;&nbsp; &nbsp;map&lt;uint256, CBlockIndex*&gt;::iterator mi = mapBlockIndex.insert(make_pair(hash, pindexNew)).first;<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;phashBlock = &amp;((*mi).first);<br />&nbsp;&nbsp; &nbsp;map&lt;uint256, CBlockIndex*&gt;::iterator miPrev = mapBlockIndex.find(hashPrevBlock);<br />&nbsp;&nbsp; &nbsp;if (miPrev != mapBlockIndex.end())<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;pindexNew-&gt;pprev = (*miPrev).second;<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;pindexNew-&gt;nHeight = pindexNew-&gt;pprev-&gt;nHeight + 1;<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;nTx = vtx.size();<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;bnChainWork = (pindexNew-&gt;pprev ? pindexNew-&gt;pprev-&gt;bnChainWork : 0) + pindexNew-&gt;GetBlockWork();<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;nChainTx = (pindexNew-&gt;pprev ? pindexNew-&gt;pprev-&gt;nChainTx : 0) + pindexNew-&gt;nTx;<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;nFile = pos.nFile;<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;nDataPos = pos.nPos;<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;nUndoPos = 0;<br />&nbsp;&nbsp; &nbsp;pindexNew-&gt;nStatus = BLOCK_VALID_TRANSACTIONS | BLOCK_HAVE_DATA;<br />&nbsp;&nbsp; &nbsp;setBlockIndexValid.insert(pindexNew);<br /><br />&nbsp;&nbsp; &nbsp;pblocktree-&gt;WriteBlockIndex(CDiskBlockIndex(pindexNew));<br /><br />&nbsp;&nbsp; &nbsp;// New best?<br />&nbsp;&nbsp; &nbsp;if (!ConnectBestBlock())<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return false;<br /><br />&nbsp;&nbsp; &nbsp;if (pindexNew == pindexBest)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;// Notify UI to display prev block&#039;s coinbase if it was ours<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;static uint256 hashPrevBestCoinBase;<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;UpdatedTransaction(hashPrevBestCoinBase);<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;hashPrevBestCoinBase = GetTxHash(0);<br />&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;pblocktree-&gt;Flush();<br /><br />&nbsp;&nbsp; &nbsp;uiInterface.NotifyBlocksChanged();<br />&nbsp;&nbsp; &nbsp;return true;<br />}</div></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Bitcoin 0.7.x won't synchronise past block 206457</b><br />
					Post by: <b>Foxpup</b> on <b>November 07, 2012, 08:56:53 AM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=122418.msg1321351#msg1321351">Quote from: deepceleron on November 07, 2012, 03:47:32 AM</a></div><div class="quote">However, there was an error writing the blkindex.dat file; likely this file was corrupted, there is a disk CRC write error/bad block, or another Bitcoin is concurrently attempting to access it, etc. The error is unanticipated/unhandled by the code.<br /></div>Huh. So any kind of failure to write to a critical file causes the client to either crash or hang while leaving the database in an inconsistent state without even displaying an error message? That seems like a pretty big oversight to me. :-\<br /><br /><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=122418.msg1321351#msg1321351">Quote from: deepceleron on November 07, 2012, 03:47:32 AM</a></div><div class="quote">In this case, rebuilding the index, or restoring/redownloading the blockchain is the remedy.<br /></div>For future reference, how exactly does one rebuild the index? I don&#039;t see any command-line options for doing this.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Bitcoin 0.7.x won't synchronise past block 206457</b><br />
					Post by: <b>deepceleron</b> on <b>November 07, 2012, 01:11:54 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=122418.msg1321677#msg1321677">Quote from: Foxpup on November 07, 2012, 08:56:53 AM</a></div><div class="quote"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=122418.msg1321351#msg1321351">Quote from: deepceleron on November 07, 2012, 03:47:32 AM</a></div><div class="quote">However, there was an error writing the blkindex.dat file; likely this file was corrupted, there is a disk CRC write error/bad block, or another Bitcoin is concurrently attempting to access it, etc. The error is unanticipated/unhandled by the code.<br /></div>Huh. So any kind of failure to write to a critical file causes the client to either crash or hang while leaving the database in an inconsistent state without even displaying an error message? That seems like a pretty big oversight to me. :-\<br /><br /><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=122418.msg1321351#msg1321351">Quote from: deepceleron on November 07, 2012, 03:47:32 AM</a></div><div class="quote">In this case, rebuilding the index, or restoring/redownloading the blockchain is the remedy.<br /></div>For future reference, how exactly does one rebuild the index? I don&#039;t see any command-line options for doing this.<br /></div><br />Although it doesn&#039;t really help now, when Bitcoin 0.8.0 is released, it will have a new database system for storing the blockchain that will be more robust for the 4+ GB that Bitcoin has become.<br /><br />If you suspect that the database index is corrupt (blkindex.dat in the bitcoin data directory), it can be deleted, the blockchain files blk0001.dat and blk0002.dat moved out of the data directory (like to the root of C: drive) and then the blocks can be re-imported from these original blockchain files:<br /><br /><b>bitcoin-qt -loadblock=c:\blk0001.dat -loadblock=c:\blk0002.dat</b></div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Bitcoin 0.7.x won't synchronise past block 206457</b><br />
					Post by: <b>kjj</b> on <b>November 07, 2012, 02:05:14 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=122418.msg1321925#msg1321925">Quote from: deepceleron on November 07, 2012, 01:11:54 PM</a></div><div class="quote">If you suspect that the database index is corrupt (blkindex.dat in the bitcoin data directory), it can be deleted, the blockchain files blk0001.dat and blk0002.dat moved out of the data directory (like to the root of C: drive) and then the blocks can be re-imported from these original blockchain files:<br /><br /><b>bitcoin-qt -loadblock=c:\blk0001.dat -loadblock=c:\blk0002.dat</b><br /></div><br />Highlighted for emphasis.&nbsp; If you don&#039;t do this step, you&#039;ll end up with with a bit of a mess.</div>
					<br />
					<hr size="2" width="100%" />
					Title: <b>Re: Bitcoin 0.7.x won't synchronise past block 206457</b><br />
					Post by: <b>Foxpup</b> on <b>November 07, 2012, 07:24:50 PM</b>
					<hr />
					<div style="margin: 0 5ex;"><div class="quoteheader"><a href="https://bitcointalk.org/index.php?topic=122418.msg1321925#msg1321925">Quote from: deepceleron on November 07, 2012, 01:11:54 PM</a></div><div class="quote">If you suspect that the database index is corrupt (blkindex.dat in the bitcoin data directory), it can be deleted, the blockchain files blk0001.dat and blk0002.dat moved out of the data directory (like to the root of C: drive) and then the blocks can be re-imported from these original blockchain files:<br /><br /><b>bitcoin-qt -loadblock=c:\blk0001.dat -loadblock=c:\blk0002.dat</b><br /></div>Thanks.</div>
					<br /><br />
					<div align="center" class="smalltext">
		<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://www.simplemachines.org/" title="Simple Machines Forum" target="_blank">Powered by SMF 1.1.19</a> | 
<a href="http://www.simplemachines.org/about/copyright.php" title="Free Forum Software" target="_blank">SMF &copy; 2006-2009, Simple Machines</a>
		</span></div>
				</td>
			</tr>
		</table>
	</body>
</html>